{% extends 'Retailer/base.html.twig' %}

{% block title %}Adicionar Cotação{% endblock %}
{% block description %}{% endblock %}
{% block menu_pricelist %} active {% endblock %}

{% block page_plugins %}
    <link href="{{ asset('assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css') }}" rel="stylesheet" type="text/css" />

{% endblock %}

{% block page %}

    <style>
        .ProgressBar {
            margin: 0 auto;
          /*  padding: 2em 0 3em;*/
            list-style: none;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: justify;
            -ms-flex-pack: justify;
            justify-content: space-between;
            width: 50% !important;
        }

        .ProgressBar-step {
            text-align: center;
            position: relative;
            width: 100%;
        }
        .ProgressBar-step:before, .ProgressBar-step:after {
            content: "";
            height: 0.2em;
            background-color: #40AE40;;
            position: absolute;
            z-index: 1;
            width: 100%;
            left: -50%;
            top: 50%;
            -webkit-transform: translateY(-50%);
            transform: translateY(-50%);
            -webkit-transition: all .25s ease-out;
            transition: all .25s ease-out;

        }
        .ProgressBar-step:first-child:before, .ProgressBar-step:first-child:after {
            display: none;
        }
        .ProgressBar-step:after {
            background-color: #40AE40;
            border:1px solid #40AE40;
            width: 0;
        }
        .ProgressBar-step.is-complete + .ProgressBar-step.is-current:after, .ProgressBar-step.is-complete + .ProgressBar-step.is-complete:after {
            width: 100%;
        }

        .ProgressBar-icon {
            width: 2.0em;
            height: 2.0em;
            background-color: #319431;
            fill: #319431;
            border-radius: 50%;
            padding: 0.5em;
            max-width: 100%;
            z-index: 10;
            position: relative;
            margin-top: 4px;
            -webkit-transition: all .25s ease-out;
            transition: all .25s ease-out;
            border:2px solid #40AE40
        }
        .is-current .ProgressBar-icon {
            fill: yellow;
            background-color: yellow;
        }
        .is-complete .ProgressBar-icon {
            fill: #fff;
            background-color: #40AE40;
        }

        .ProgressBar-stepLabel {
            display: block;
            text-transform: uppercase;
            color: #9F9FA3;
            position: absolute;
            padding-top: 0.5em;
            width: 100%;
            -webkit-transition: all .25s ease-out;
            transition: all .25s ease-out;
        }
        .is-current > .ProgressBar-stepLabel, .is-complete > .ProgressBar-stepLabel {
            color: #00637C;
        }


        /*
        Float label styles
         */



        label:hover {
            cursor: text;
        }



        @media (max-width: 500px) {
            .contact-form {
                margin: 0 0 100px;
                width: 100%;
            }
        }
        .contact-form .email, .contact-form .message, .contact-form .text {
            position: relative;
        }
        .contact-form .email input:focus, .contact-form .email textarea:focus, .contact-form .message input:focus, .contact-form .message textarea:focus, .contact-form .text input:focus, .contact-form .text textarea:focus {
            background: #f4f5f6;
        }
        .contact-form .email label, .contact-form .message label, .contact-form .text label {
            color: #40AE40;
            left: 23px;
            position: absolute;
            top: 13px;
            -moz-transition: all, 150ms;
            -o-transition: all, 150ms;
            -webkit-transition: all, 150ms;
            transition: all, 150ms;
        }
        .contact-form .email.typing label, .contact-form .message.typing label, .contact-form .text.typing label {
            color: #40ae40;
            font-size: 10px;
            top: 2px;
        }

        .text input {
            margin: 0 auto;
            height: 44px;
            padding-top: 14px;
            width: 284px;
            border: 1px solid #40AE40
        }
        .text input:focus{
            border: 1px solid #40AE40;
        }

        .contact-form .email {
            border-left: 1px #e6e6e6 solid;
            float: right;
        }
        @media (max-width: 500px) {
            .contact-form .email {
                border-left: none;
                border-top: 1px #e6e6e6 solid;
            }
        }
        .contact-form .message {
            border-bottom: 1px #e6e6e6 solid;
            border-top: 1px #e6e6e6 solid;
            clear: both;
        }
        .contact-form .message textarea {
            height: 200px;
            padding: 23px;
        }
        .contact-form .text {
            float: left;
        }
        .navbar-inner {
            background: #319431;
            width: 100%;
        }

        #rootwizard{
            background: #fff;
        }

        .wizard-container{
            padding-top: 12px;
            padding-bottom: 15px;
            padding-left: 20px;
            padding-right: 20px;
            border-top-width: 1px;
        }

        .mt-checkbox.mt-checkbox-outline:hover>input:not([disabled]):checked ~ span, .mt-checkbox.mt-checkbox-outline>input:checked ~ span {

            background: #319431 !important;
            border-radius: 2px;
            border: 1px solid #319431;

        }

        .mt-checkbox.mt-checkbox-outline>span {
            border: 1px solid #d9d9d9;
            background: 0;
            border-radius: 2px;
        }
        .mt-checkbox>span:after {
            left: 6px;
            top: 2px;
            width: 5px;
            height: 10px;
            border: solid #fff;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .error {
            border: 1px solid red !important;
        }

        .valid {
            border: 1px solid #40AE40 !important;
        }

        .nav-pills>li.active>a, .nav-pills>li.active>a:hover, .nav-pills>li.active>a:focus {
            color: transparent;
            background-color: transparent;
        }

        .nav>li>a:hover, .nav>li>a:focus {
            text-decoration: none;
            background-color: transparent;
        }
        .disabled-click {
            pointer-events: none;
            cursor: default;
        }
        td {
            text-align: center;
            vertical-align: middle;
        }
        th {
            text-align: center;
            vertical-align: middle;
        }
        .dataTables_filter{

            padding-right: 40px;

        }
        .datatable-plus-button{

            padding-top: 5px;
            top: 14px;
            padding-bottom: 5px;
            padding-right: 9px;
            background: #40AE40;



        }
        .datatable-plus-button::before {

            font-family: fontAwesome;
            content: "\f067\00a0";
            color: white;
            background-color: transparent;

        }

        .text-area{
            width: 284px;
            border: 1px solid #40AE40

        }



    </style>

    <div class="page-wrapper-row full-height">
        <div class="page-wrapper-middle">
            <!-- BEGIN CONTAINER -->
            <div class="page-container">
                <!-- BEGIN CONTENT -->
                <div class="page-content-wrapper">
                    <!-- BEGIN CONTENT BODY -->
                    <!-- BEGIN PAGE HEAD-->
                    <div class="page-head">
                        <div class="container">
                            <!-- BEGIN PAGE TITLE -->
                            <div class="page-title">
                                <h1>Cotação
                                    <small>cotação</small>
                                </h1>
                            </div>
                            <!-- END PAGE TITLE -->
                        </div>
                    </div>
                    <!-- END PAGE HEAD-->
                    <!-- BEGIN PAGE CONTENT BODY -->
                    <div class="page-content">
                        <div class="container" style="height: 50px;">
                            {% include '_partial/flashMessages.html.twig' %}
                            <!-- BEGIN PAGE BREADCRUMBS -->
                            <ul class="page-breadcrumb breadcrumb">
                                <li>
                                    <a href="{{ path('dashboard') }}">Home</a>
                                    <i class="fa fa-circle"></i>
                                </li>
                                <li>
                                    <a href="{{ path('cotacoes') }}">Cotações</a>
                                    <i class="fa fa-circle"></i>
                                </li>
                                <li>
                                    <span>Cotação</span>
                                </li>
                            </ul>
                            <!-- END PAGE BREADCRUMBS -->
                            <!-- BEGIN PAGE CONTENT INNER -->
                            <div class="page-content-inner">



                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="tabbable-line boxless tabbable-reversed">
                                            <div class="tab-content">
                                                <div class="tab-pane active" id="tab_0">
                                                    <div class="portlet box green-conecta" style="border-left-width: 0px;border-bottom-width: 0px;border-right-width: 0px;">
                                                        <div class="portlet-title">
                                                            <div class="caption">
                                                                <i class="fa fa-gift"></i><span id="wizardStepLabel">Dados da Cotação</span>
                                                            </div>
                                                        </div>



                                                        <!-- BEGIN WIZARD-->

                                                        <div id="rootwizard">
                                                            <div class="navbar" style="border-top-width: 0px;border-left-width: 0px;border-right-width: 0px;">
                                                                <div class="navbar-inner portlet-title">
                                                                    <div class="container">
                                                                        <ul class="ProgressBar">
                                                                            <li class="ProgressBar-step is-current">
                                                                                <a href="#tab1" class="disabled-click" data-toggle="tab">
                                                                                    <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                                                                                    <span class="ProgressBar-stepLabel"><!--1--></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="ProgressBar-step" disabled="">
                                                                                <a href="#tab2" class="disabled-click" data-toggle="tab">
                                                                                    <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                                                                                    <span class="ProgressBar-stepLabel"><!--2--></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="ProgressBar-step">
                                                                                <a href="#tab3" class="disabled-click" data-toggle="tab">
                                                                                    <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                                                                                    <span class="ProgressBar-stepLabel"><!--3--></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="ProgressBar-step">
                                                                                <a href="#tab4" class="disabled-click" class="disabled-click" data-toggle="tab">
                                                                                    <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                                                                                    <span class="ProgressBar-stepLabel"><!--4--></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="ProgressBar-step">
                                                                                <a href="#tab5" class="disabled-click" data-toggle="tab">
                                                                                    <svg class="ProgressBar-icon"><use xlink:href="#checkmark-bold"/></svg>
                                                                                    <span class="ProgressBar-stepLabel"><!--5--></span>
                                                                                </a>
                                                                            </li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <ul class="pager wizard">

                                                                <li class="previous first" style="display:none;"><a href="#">Início</a></li>
                                                                <li class="previous"   id="previous"><a style="margin-left: 5px;" class="btn btn-circle green-conecta" href="#">Anterior</a></li>
                                                                <li class="next last" style="display:none;"><a href="#">Último</a></li>

                                                                <li class="next" id="advance"><a class="btn btn-circle green-conecta pull-right disabled" href="#" style="margin-right: 5px;margin-bottom: 5px;">Próximo</a></li>

                                                            </ul>

                                                            <div class="tab-content">

                                                                <!-- BEGIN COTACAO STEP-->

                                                                <div class="tab-pane" id="tab1">

                                                                    <div class="portlet-body form">

                                                                        <!-- BEGIN COTACAO FORM-->

                                                                        <form action="#" method="POST" id="cotacao_form" class="form-horizontal contact-form">


                                                                            <div class="form-body ">

                                                                                <div class="row ">

                                                                                    <div class="col-lg-4 col-lg-offset-5">
                                                                                        <div class="">
                                                                                            <div class="form-group cotacao text ">
                                                                                                <label for="cotacao">Nome da Cotação*</label>
                                                                                                <input class="form-control"  name="name" type="text" id="cotacao" required />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>

                                                                                <div class="row ">

                                                                                    <div class="col-lg-4 col-lg-offset-5">
                                                                                        <div class="">
                                                                                            <div class="form-group datetimepicker1 text ">
                                                                                                <label for="datetimepicker1">Validade de</label>
                                                                                                <input class="form-control " type="text" id="datetimepicker1" name="begins-at" required />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>

                                                                                <div class="row ">

                                                                                    <div class="col-lg-4 col-lg-offset-5">
                                                                                        <div class="">
                                                                                            <div class="form-group datetimepicker2 text ">
                                                                                                <label for="datetimepicker2">Validade Até</label>
                                                                                                <input class="form-control " type="text" id="datetimepicker2" name="expires-at" required />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>

                                                                                <div class="row ">

                                                                                    <div class="col-lg-4 col-lg-offset-5">
                                                                                        <div class="">
                                                                                            <div class="form-group prazo text ">
                                                                                                <label for="prazo">Prazo de pagamento</label>
                                                                                                <textarea rows="3" class="form-control text-area" type="text" id="prazo" name="payment-date"  >
                                                                                                </textarea>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>

                                                                                </div>


                                                                            </div>
                                                                            <!--
                                                                            <div class="form-actions">
                                                                                <div class="row">
                                                                                    <div class="col-md-offset-3 col-md-9">
                                                                                        <button type="submit" class="btn btn-circle green-conecta">Salvar</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            -->


                                                                        </form>
                                                                        <!-- END FORM-->
                                                                    </div>

                                                                </div>

                                                                <!-- END COTACAO FORM-->

                                                                <div class="tab-pane " id="tab2">
                                                                    <div class="wizard-container">
                                                                        <table class="table table-striped table-bordered table-hover" id="representative-datatable">
                                                                            <thead>
                                                                            <tr>
                                                                                <th>Nome do Fornecedor</th>
                                                                                <th>Nome do Representante</th>
                                                                                <th>E-mail</th>
                                                                                <th>CNPJ</th>
                                                                                <th>Telefone</th>
                                                                                <th name="removeSort" class="no-sort"><label class="mt-checkbox mt-checkbox-outline"/>  <input name="selectAllReprensentative" type="checkbox"   /> <span></span></th>

                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>

                                                                                {% for supplier in suppliers %}
                                                                                    {% for representative in supplier.representatives if representative.deleted == 0 %}
                                                                                        <tr>
                                                                                            <td> {{ supplier.name }} </td>
                                                                                            <td> {{ representative.name }} </td>
                                                                                            <td class="numeric"> {{ representative.email }} </td>
                                                                                            <td class="numeric"> {{ supplier.cnpj }} </td>
                                                                                            <td class="numeric"> {{ representative.phone }} </td>
                                                                                            <td>
                                                                                                <label class="mt-checkbox mt-checkbox-outline"/>  <input type="checkbox" name="chkRepresentative" value="{{ supplier.id }}"  /> <span></span>
                                                                                            </td>

                                                                                        </tr>
                                                                                    {% endfor %}
                                                                                {% endfor %}

                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>

                                                                <div class="tab-pane" id="tab3">
                                                                    <div class="wizard-container">
                                                                        <table class="table table-striped table-bordered table-hover" id="listing-datatable">
                                                                            <thead>
                                                                            <tr>
                                                                                <th width="20%"> Nome </th>
                                                                                <th> Descrição </th>
                                                                                <th> Tipo </th>
                                                                                <th> Itens </th>
                                                                                <th name="removeSort" class="no-sort"><label class="mt-checkbox mt-checkbox-outline"/>  <input name="selectAllListing" type="checkbox" name="test" /> <span></span></th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>


                                                                                {% for listing in listings %}
                                                                                    <tr>
                                                                                        <input type="hidden" value="{{ listing.id }}">
                                                                                        <td width="20%">{{ listing.name }}</td>
                                                                                        <td >{{ listing.description }}</td>
                                                                                        <td>{{ types[listing.type] }}</td>
                                                                                        <td>{{ listing.listingProducts|length }}</td>
                                                                                        <td>
                                                                                            <label class="mt-checkbox mt-checkbox-outline"/>  <input type="checkbox" value="{{ listing.id }}" name="chkListing" /> <span></span>
                                                                                        </td>
                                                                                    </tr>
                                                                                {% endfor %}

                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>




                                                                <div class="tab-pane" id="tab4">
                                                                    <div class="wizard-container">
                                                                        <table class="table table-striped table-bordered table-hover" id="product-datatable">
                                                                            <thead>
                                                                            <tr>
                                                                                <th width="20%"> Código </th>
                                                                                <th> Nome do Produto </th>
                                                                                <th> Tipo </th>
                                                                                <th> Fabricante </th>
                                                                                <th> Embalagem de Compra </th>
                                                                                <th><label class="mt-checkbox mt-checkbox-outline"/>  <input  type="checkbox"  name="selectAllProducts" /> <span></span></th>
                                                                            </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                            {% for product in products %}
                                                                                <tr>
                                                                                    <td> {{ product.id }} </td>
                                                                                    <td> {{ product.name }} </td>
                                                                                    <td> {{ product.type }} </td>
                                                                                    <td> {{ product.brand }} </td>
                                                                                    <td> {{ product.unit }} {{ product.quantity }} </td>
                                                                                    <td>
                                                                                        <label class="mt-checkbox mt-checkbox-outline"/>  <input type="checkbox" value="{{ product.id }}" name="chkProducts" /> <span></span>
                                                                                    </td>

                                                                                </tr>
                                                                            {% endfor %}
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>

                                                                <div class="tab-pane" id="tab5">
                                                                    <div class="wizard-container">
                                                                        <div class="row">
                                                                            <div class="col-md-6">
                                                                                <h2>
                                                                                    Dados da Cotação
                                                                                </h2>

                                                                                <h4>
                                                                                    Início
                                                                                </h4>
                                                                                </br>
                                                                                <div class="col-md-3">

                                                                                <i class="fa fa-calendar" aria-hidden="true" ></i><span id="quote_start"> data</span>
                                                                                </div>

                                                                                <div class="col-md-3">

                                                                                    <i class="fa fa-calendar" aria-hidden="true"></i><span id="quote_start_time"> hora</span>
                                                                                </div>

                                                                                </br>
                                                                                </br>
                                                                                <h4>
                                                                                    Fim
                                                                                </h4>
                                                                                </br>
                                                                                <div class="col-md-3">
                                                                                    <i class="fa fa-calendar" aria-hidden="true"></i><span id="quote_end"> data</span>
                                                                                </div>

                                                                                <div class="col-md-3">
                                                                                    <i class="fa fa-calendar" aria-hidden="true"></i><span id="quote_end_time"> hora</span>
                                                                                </div>


                                                                                </br>
                                                                                </br>

                                                                                <div class="col-md-3">
                                                                                    <i class="fa fa-calendar" aria-hidden="true"></i><span > Itens</span>
                                                                                    </br>
                                                                                    </br>
                                                                                    <span id="quote_itens"> </span>
                                                                                </div>

                                                                                <div class="col-md-4">
                                                                                    <i class="fa fa-calendar" aria-hidden="true"></i><span > Fornecedores</span>
                                                                                    </br>
                                                                                    </br>
                                                                                    <span id="quote_suppliers"> </span>
                                                                                </div>



                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                <h4>
                                                                                    Prazo de Pagamento
                                                                                </h4>

                                                                                <div class="col-md-3">
                                                                                    <span id="quote_due_date"> data</span>
                                                                                </div>

                                                                            </div>
                                                                            <div class="col-md-6" style="margin-top: 50px;margin-left: 0px;padding-left: 110px;">

                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                </br>
                                                                                <button  class="btn col-md-6 green-conecta">Salvar Cotação</button>
                                                                                </br>
                                                                                </br>
                                                                                <button  class="btn col-md-6 green-conecta">Iniciar Cotação Presencial</button>
                                                                                </br>
                                                                                </br>
                                                                                <button  class="btn col-md-6 green-conecta">Enviar Para Fornecedor</button>


                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                            </div>
                                                        </div>




                                                        <!-- END WIZARD-->







                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- END PAGE CONTENT INNER -->
                        </div>
                    </div>
                    <!-- END PAGE CONTENT BODY -->
                    <!-- END CONTENT BODY -->
                </div>
                <!-- END CONTENT -->
            </div>
            <!-- END CONTAINER -->
        </div>
    </div>

    <svg style="display:none" xmlns="http://www.w3.org/2000/svg">
        <symbol id="checkmark-bold" viewBox="0 0 24 24">
            <path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/>
        </symbol>

    </svg>


{% endblock %}



{% block script %}

    <script src="{{ asset('assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.pt-BR.js') }}" type="text/javascript" charset="UTF-8"></script>
    <script src="{{ asset('assets/global/plugins/bootstrap-wizard/jquery.bootstrap.wizard.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/scripts/datatable.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/datatables/datatables.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/jquery-validation/js/jquery.validate.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('assets/global/plugins/jquery-validation/js/localization/messages_pt_BR.min.js') }}" type="text/javascript"></script>


    <script>

        $(function () {
            $('#datetimepicker1').datetimepicker({
                format: 'dd/mm/yyyy hh:ii',
                language: 'pt-BR'
            });
            $('#datetimepicker2').datetimepicker({
                format: 'dd/mm/yyyy hh:ii',
                language: 'pt-BR'
            });
            $('#datetimepicker3').datetimepicker({
                format: 'dd/mm/yyyy hh:ii',
                language: 'pt-BR'
            });
        });

        function setItensSuplliers(id,elementId){

            var count = 0 ;

            $.each($("#" + id + " tr").find("input"), function( index, value ) {
                if ( $(this)["0"].checked ){
                    count = count + 1
                };
            });
            console.log(elementId + " " + count)
            $("#" + elementId ).text(count)


        }

        function setDateTime(id,elementId,format){
            var formatted
            var date = $("#"+id).data("datetimepicker").getDate()

                if (format === "date"){

                    formatted = " " +  date.getDate() + "/" +(date.getMonth() + 1) + "/" +  date.getFullYear();

                }else{
                    formatted = " " +   date.getHours() + ":" + date.getMinutes() ;

                }

            $("#" + elementId ).text(formatted)
        }

        function stepFoward($bar){
            if ($bar.children(".is-current").length > 0) {
                $bar.children(".is-current").removeClass("is-current").addClass("is-complete").next().addClass("is-current");
            } else {
                $bar.children().first().addClass("is-current");
            }
        }

        function selectAll(topCheck,checks){
            $("[name='" + topCheck + "']").click(function() {
                var checkBoxes = $("[name='" + checks + "']");
                checkBoxes.prop("checked", !checkBoxes.prop("checked"));
            })
        }





        //$("#advance").addClass("disabled")


        $(document).ready(function() {
            //BEGIN WIZARD METHODS
            $('#rootwizard').bootstrapWizard({onTabShow: function(tab, navigation, index) {
                var currentStep = navigation.find('li');
                currentStep.removeClass("active");


                switch(index) {
                    case 0 :

                        $("#wizardStepLabel").text("Dados da Cotação");
                        $("#advance a").addClass('disabled');

                        //BEGIN FORM VALIDATION


                        var cotacaoForm = $( "#cotacao_form" );

                        cotacaoForm.validate({
                            errorPlacement: function(){
                                return false;
                            }
                        });


                        cotacaoForm.mouseout(function() {

                            var validationState = $('#cotacao_form').valid();

                            if(validationState){
                                $("#advance").find("a").removeClass('disabled');




                            }

                        });

                        //END FORM VALIDATION

                        break;

                    case 1 :

                        $("#wizardStepLabel").text("Selecionar Fornecedor");
                        $("#advance a").addClass('disabled');

                        var representativeTable = $('#representative-datatable');

                        representativeTable.mouseout(function() {

                            if( representativeTable.find('tr').find("input").is(":checked") ){

                                $("#advance").find("a").removeClass('disabled');



                            }

                        });

                        break;
                    case 2 :

                        $("#wizardStepLabel").text("Selecionar Lista");
                        $("#advance a").addClass('disabled');

                        var listingTable = $('#listing-datatable');

                        listingTable.mouseout(function() {

                            if( listingTable.find('tr').find("input").is(":checked") ){

                                $("#advance").find("a").removeClass('disabled');


                            }

                        });

                        break;
                    case 3 :
                        $("#wizardStepLabel").text("Selecionar Produtos");
                        $("#advance a").addClass('disabled');

                        var productTable = $('#product-datatable');

                        productTable.mouseout(function() {

                            if( productTable.find('tr').find("input").is(":checked") ){

                                $("#advance").find("a").removeClass('disabled');


                            }

                        });

                        break;
                    case 4 :
                        $("#wizardStepLabel").text("Confirmação dos Dados");
                        $("#advance").hide()
                        setDateTime("datetimepicker1","quote_start","date");
                        setDateTime("datetimepicker1","quote_start_time","time");
                        setDateTime("datetimepicker2","quote_end","date");
                        setDateTime("datetimepicker2","quote_end_time","time");
                        setDateTime("datetimepicker3","quote_due_date","date");
                        setItensSuplliers("product-datatable","quote_itens");
                        setItensSuplliers("representative-datatable","quote_suppliers");
                        break;
                    default:

                    //console.log("birl")
                }



            }});



        });



        $("#advance").on("click", function() {

            var $bar = $(".ProgressBar");

                stepFoward($bar);
        });

        $("#previous").on("click", function() {
            var $bar = $(".ProgressBar");
            if ($bar.children(".is-current").length > 0) {
                $bar.children(".is-current").removeClass("is-current").prev().removeClass("is-complete").addClass("is-current");
            } else {
                $bar.children(".is-complete").last().removeClass("is-complete").addClass("is-current");
            }
        });

        //END WIZARD METHODS

        $('#datetimepicker1').change(function(){
            $('.datetimepicker1.text').addClass('typing');
            if( $(this).val().length == 0 ) {
                $('.datetimepicker1.text').removeClass('typing');
            }
        });

        $('#datetimepicker1').datetimepicker(
            'setDate', (new Date()),
            {format: 'dd/mm/yyyy hh:ii'}
        );
        $('.datetimepicker1.text').addClass('typing');



        $('#datetimepicker2').change(function(){
            $('.datetimepicker2.text').addClass('typing');
            if( $(this).val().length == 0 ) {
                $('.datetimepicker2.text').removeClass('typing');
            }
        });




        //cotacao field default value

        var d = new Date();

        var month = d.getMonth()+1;
        var day = d.getDate();
        var hours = d.getHours()
        var minutes = d.getMinutes()

        var output = "Cotação " + ((''+day).length<2 ? '0' : '') + day + '/' +
            ((''+month).length<2 ? '0' : '') + month + ", " +
            hours + ":" + minutes;

        $("#cotacao").val(output);
        $('.cotacao.text').addClass('typing');




        //BEGIN FLOAT LABEL METHODS
        $('#cotacao').keyup(function(){
            $('.cotacao.text').addClass('typing');
            if( $(this).val().length == 0 ) {
                $('.cotacao.text').removeClass('typing');
            }
        });

        $('#prazo').keyup(function(){
            $('.prazo.text').addClass('typing');
            if( $(this).val().length == 0 ) {
                $('.prazo.text').removeClass('typing');
            }
        });
        //END FLOAT LABEL METHODS



        // BEGIN REPRESENTATIVE TABLE
        $('#representative-datatable').dataTable( {
            language: {
                url: "https://cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json",
                select: {
                    rows: {
                        _: "%d linha selecionadas",
                        0: "Clique numa linha para selecionar",
                        1: "1 linha selecionada"
                    }
                }
            },
            dom: '<"top"<"pull-left"l><"pull-right"fB>>t<"bottom"ip><"clear">',
            buttons: [
                {
                    text: '',
                    className: 'datatable-plus-button '
                    // action: function ( e, dt, node, config ) {
                     //   console.log(dt);
                    //}
                }
            ],
            "columnDefs": [
                { "orderable": false, "targets": 5 }
            ]

        } );

        /*

         padding-top: 5px;
         top: 14px;
         padding-bottom: 5px;

         */

        //select all function
        selectAll("selectAllReprensentative","chkRepresentative");


        // END REPRESENTATIVE TABLE


        // BEGIN LISTING TABLE
        $('#listing-datatable').dataTable( {
            language: {
                url: "https://cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json",
                select: {
                    rows: {
                        _: "%d linha selecionadas",
                        0: "Clique numa linha para selecionar",
                        1: "1 linha selecionada"
                    }
                }
            },
            dom: '<"top"<"pull-left"l><"pull-right"fB>>t<"bottom"ip><"clear">',
            buttons: [
                {
                    text: '',
                    className: 'datatable-plus-button '
                    // action: function ( e, dt, node, config ) {
                    //   console.log(dt);
                    //}
                }
            ],
            "columnDefs": [
                { "orderable": false, "targets": 4 }
            ]
        } );

        //select all function
        selectAll("selectAllListing","chkListing");

        // END LISTING TABLE


        // BEGIN PRODUCTS TABLE
        $('#product-datatable').dataTable( {
            language: {
                url: "https://cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json",
                select: {
                    rows: {
                        _: "%d linha selecionadas",
                        0: "Clique numa linha para selecionar",
                        1: "1 linha selecionada"
                    }
                }
            },
            dom: '<"top"<"pull-left"l><"pull-right"fB>>t<"bottom"ip><"clear">',
            buttons: [
                {
                    text: '',
                    className: 'datatable-plus-button '
                    // action: function ( e, dt, node, config ) {
                    //   console.log(dt);
                    //}
                }
            ],
            "columnDefs": [
                { "orderable": false, "targets": 5 }
            ]
        } );

        //select all function
        selectAll("selectAllProducts","chkProducts");

        // END PRODUCTS TABLE




    </script>

{% endblock %}
